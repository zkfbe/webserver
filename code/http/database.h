#pragma once
#include <mysql/mysql.h>
class Database {
public:
    Database(MYSQL* sql) : db(sql) {};

    bool open();
    void close();

    bool executeQuery(const std::string name) {
        char order[256] = { 0 };
        snprintf(order, 256, "SELECT username, password FROM user WHERE username='%s' LIMIT 1", name.c_str());
        return mysql_query(db, order);
    }
    bool executeInsert(const std::string name,const std:: string pwd) {
        char order[256] = { 0 };
        snprintf(order, 256,"INSERT INTO user(username, password) VALUES('%s','%s')", name.c_str(), pwd.c_str());
        return mysql_query(db, order);
    }
    bool executeQueryWithCallback(const char* query, int (*callback)(void*, int, char**, char**), void* data);
    
private:
    MYSQL* db;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
    MYSQL_FIELD *fields = nullptr;
    MYSQL_RES *res = nullptr;
};

